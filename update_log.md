
#version 0.2#
**目的:松耦合,优化代码(非架构优化)**


##thread_pool.py##

1. global COUNT:
COUNT 变量的目的是为了记录爬取的图片的数量，这个变量在五个子线程中都有使用和修改,所以之前使用全局变量解决.
改进办法:
标准做法是在thread_pool类中作为实例属性,并且传进五个子线程中.
但是python中的变量为引用调用,所以采用'list'完成此任务..
代码中的注释'#add/#modified'处为相关改动

2. global EVENT:
EVENT 变量是为了实现对队列的互斥访问,但是经过前一段时间的学习得知Queue为线程安全.所以去掉此全局变量

3. global MUTEX:
MUTEX 为子线程资源访问互斥锁..是必要的,没有改动的必要.


##thread_run.py##

1. 对外部无需调用的函数,使用默认的私用函数命名规则(以下划线开头),对其他模块隐藏调用,只保留外部调用的两个函数(do_image_parse/do_page_parse)


经过以上的优化,每个模块从单元测试的角度来讲,已经完全断耦合了...两个类之间也不存在紧耦合的问题了

